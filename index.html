<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Xac Anon</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff4f81">

<!-- Favicon -->
<link rel="icon" href="https://i.ibb.co/jPxV6BvR/Xac-Anon640x640.jpg" type="image/png" />

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Friz+Quadrata&family=Medici&display=swap" rel="stylesheet" />

<!-- OG & Twitter -->
<meta property="og:title" content="Xac Anon – Official Site" />
<meta property="og:description" content="Discover Xac Anon’s music, latest releases, press kit and more." />
<meta property="og:image" content="https://i.ibb.co/jPxV6BvR/Xac-Anon640x640.jpg" />
<meta property="og:url" content="https://xacanonmusic.com" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Xac Anon – Official Site" />
<meta name="twitter:description" content="Discover Xac Anon’s music, latest releases, press kit and more." />
<meta name="twitter:image" content="https://i.ibb.co/jPxV6BvR/Xac-Anon640x640.jpg" />
<meta name="description" content="Discover Xac Anon’s music, latest releases, and press kit. Dive into lo-fi and emo rap that speaks from the heart." />

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "MusicGroup",
  "name": "Xac Anon",
  "url": "https://xacanonmusic.com",
  "sameAs": [
    "https://instagram.com/xacanon/",
    "https://x.com/XacAnonMusic",
    "https://youtube.com/@XacAnon"
  ],
  "image": "https://i.ibb.co/jPxV6BvR/Xac-Anon640x640.jpg",
  "description": "Discover Xac Anon’s music, latest releases, and press kit. Lo-fi and emo rap that speaks from the heart.",
  "genre": ["Lo-fi Rap", "Emo Rap"]
}
</script>
  
<style>
/* ===== EXISTING STYLES HERE ===== */
/* ... your existing CSS ... */

/* ===== SUBSCRIBE BOX ===== */
.subscribe-section {
  padding: 2rem;
  text-align: center;
}

.subscribe-box {
  display: inline-block;
  background: #1a1a1a;
  padding: 1.5rem;
  border-radius: 12px;
  border: 1px solid #ff4f81;
  box-shadow: 0 0 12px #ff4f81;
  width: 90%;
  max-width: 400px;
}

.subscribe-box h3 {
  margin-bottom: 1rem;
  font-size: 1.4rem;
  color: #ff4f81;
}

.subscribe-box input {
  width: 90%;
  padding: 0.6rem;
  border-radius: 6px;
  border: 1px solid #ff4f81;
  background: #0f0f0f;
  color: white;
  margin-bottom: 0.8rem;
}

.subscribe-box button {
  background: #ff4f81;
  color: #0f0f0f;
  padding: 0.6rem 1.4rem;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  cursor: pointer;
  transition: 0.3s;
}

.subscribe-box button:hover {
  background: #ff2d6a;
}

#sub-msg {
  margin-top: 0.8rem;
  color: #ff4f81;
}
</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
  <div class="navbar-container">
    <a href="index.html" class="nav-logo"><img src="https://i.ibb.co/jPxV6BvR/Xac-Anon640x640.jpg" alt="Xac Anon Logo"></a>
    <div class="nav-right">
      <a href="index.html" class="home-button" data-text="Home">Home</a>
      <div class="hamburger"><i class="fas fa-bars"></i></div>
      <ul class="nav-links">
        <li><a href="music.html">Music</a></li>
        <li><a href="lyrics.html">Lyrics</a></li>
        <li><a href="blog.html">Blog</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </div>
  </div>
</nav>

<div id="main-content">
<header style="text-align:center; padding:2rem 1rem;">
<img src="https://i.ibb.co/jPxV6BvR/Xac-Anon640x640.jpg" alt="Xac Anon Logo" />
<h1>Xac Anon</h1>
<p class="tagline">Welcome to the sound of the future.</p>
<div class="countdown-container">
<h2>Next Release Countdown</h2>
<p id="countdown">Loading...</p>
<p>Release Date: <span id="release-date"></span></p>
</div>
</header>

<!-- MUSIC SECTIONS -->
<section class="music-section">
<h2>Popular Tracks</h2>
<div class="music-grid">
<a class="music-card" data-track-url="https://open.spotify.com/track/7nXEbI0APAz5A0Eu5WplqT"></a>
<a class="music-card" data-track-url="https://open.spotify.com/track/0KMw00xCTfO2DknghdAm5e"></a>
<a class="music-card" data-track-url="https://open.spotify.com/track/4cjPxibtS86esnvVdrVF5G"></a>
</div>
</section>

<section class="music-section">
<h2>Recent Releases</h2>
<div class="music-grid">
<a class="music-card" data-track-url="https://open.spotify.com/album/4h0iATP9ZcRlvDPJ1cnoeK?si=zPwQ67bUSAmo6_0_8aQLkQ"></a>
<a class="music-card" data-track-url="https://open.spotify.com/album/6h3vtYq7BmnVmG9hCGVsP1?si=YCMMa99YSkyfHG29rI2imw"></a>
<a class="music-card" data-track-url="https://open.spotify.com/track/7nXEbI0APAz5A0Eu5WplqT?si=7e2d377d763e40e1"></a>
</div>
</section>

<section id="featured-music" class="music-section">
<h2>Featured Music</h2>
<div class="music-grid">
<a class="music-card" data-track-url="https://open.spotify.com/track/0YbIjMC4dNebTEFwYJl2Mr"></a>
<a class="music-card" data-track-url="https://open.spotify.com/track/2kBQzsiHEeBFwKnEDo13Rl"></a>
<a class="music-card" data-track-url="https://open.spotify.com/track/6Dk1WBTgXAcCtY9lGwMIw5"></a>
</div>
</section>

<!-- EPK SECTION -->
<section class="epk-section">
<h2>Check Out My EPK</h2>
<p>Everything you need to know about my music, achievements, and press kit.</p>
<a href="epk.html" data-text="View My EPK">View My EPK</a>
</section>

<!-- SUBSCRIPTION BOX -->
<section class="subscribe-section">
  <div class="subscribe-box">
    <h3>Subscribe for Updates</h3>
    <input id="sub-email" type="email" placeholder="Your email">
    <button onclick="subscribeUser()">Subscribe</button>
    <p id="sub-msg"></p>
  </div>
</section>

<!-- MODAL -->
<div id="spotify-modal" class="modal">
<div class="modal-content">
<span class="modal-close">&times;</span>
<iframe id="spotify-player" src="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
</div>
</div>

<!-- FOOTER -->
<footer>
<div class="ticker">Breaking News: New single dropping soon — stay tuned!</div>
<div class="socials">
<a href="https://instagram.com/xacanon/" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
<a href="https://x.com/XacAnonMusic" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
<a href="https://youtube.com/@XacAnon" target="_blank" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
</div>
</footer>

<script>
// ===== NAVBAR HAMBURGER =====
const hamburger = document.querySelector('.hamburger');
const navLinks = document.querySelector('.nav-links');
hamburger.addEventListener('click', () => { navLinks.classList.toggle('show'); });

// ===== COUNTDOWN =====
const countdownElement = document.getElementById("countdown");
const releaseElement = document.getElementById("release-date");
const releaseTime = "2025-10-25T00:00:00"; // AEDT
const timeZone = "Australia/Sydney";
const releaseDateAEDT = new Date(releaseTime);
const releaseDateLocal = new Date(releaseDateAEDT.toLocaleString('en-US',{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}));
releaseElement.textContent = `AEDT: ${releaseDateAEDT.toLocaleString('en-AU',{dateStyle:'medium',timeStyle:'short',timeZone:timeZone})} | Your Time: ${releaseDateLocal.toLocaleString()}`;

function updateCountdown(){
  const now = new Date();
  const diff = releaseDateAEDT - now;
  if(diff <= 0){ countdownElement.textContent="Out Now!"; return; }
  const days = Math.floor(diff/(1000*60*60*24));
  const hours = Math.floor((diff/(1000*60*60))%24);
  const mins = Math.floor((diff/(1000*60))%60);
  const secs = Math.floor((diff/1000)%60);
  countdownElement.textContent = `${days}d ${hours}h ${mins}m ${secs}s`;
}
setInterval(updateCountdown,1000);
updateCountdown();

// ===== SPOTIFY TRACK & ALBUM CARDS =====
async function loadSpotifyData(){
  const cards = document.querySelectorAll(".music-card");
  for(let card of cards){
    const url = card.dataset.trackUrl;
    try{
      const res = await fetch(`https://open.spotify.com/oembed?url=${encodeURIComponent(url)}`);
      const data = await res.json();
      card.innerHTML = `<img src="${data.thumbnail_url}" alt="${data.title}"><h3>${data.title}</h3>`;
      const type = url.includes('/album/')?'album':'track';
      const id = url.split('/').pop().split('?')[0];
      card.addEventListener('click',()=> {
        document.getElementById('spotify-player').src=`https://open.spotify.com/embed/${type}/${id}`;
        document.getElementById('spotify-modal').style.display='flex';
      });
    } catch(err){ console.error(err); card.innerHTML="<h3>Track unavailable</h3>"; }
  }
}
loadSpotifyData();

// ===== MODAL =====
document.querySelector('.modal-close').onclick = function(){
  document.getElementById('spotify-modal').style.display='none';
  document.getElementById('spotify-player').src='';
};
window.onclick = function(e){
  if(e.target==document.getElementById('spotify-modal')){
    document.getElementById('spotify-modal').style.display='none';
    document.getElementById('spotify-player').src='';
  }
};
</script>

<!-- ===== SUBSCRIBE SCRIPT ===== -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_DOMAIN",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_STORAGE_BUCKET",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  window.subscribeUser = async function() {
    const email = document.getElementById("sub-email").value;
    const msg = document.getElementById("sub-msg");

    if (!email || !email.includes("@")) {
      msg.innerText = "Please enter a valid email.";
      return;
    }

    try {
      // Save to Firestore
      await addDoc(collection(db, "subscribers"), {
        email,
        timestamp: serverTimestamp()
      });

      // Add to Brevo List
      await fetch("https://api.brevo.com/v3/contacts", {
        method: "POST",
        headers: {
          "accept": "application/json",
          "api-key": "YOUR_BREVO_API_KEY",
          "content-type": "application/json"
        },
        body: JSON.stringify({
          email: email,
          listIds: [YOUR_LIST_ID]
        })
      });

      msg.innerText = "Subscribed successfully!";
    } catch (e) {
      msg.innerText = "Something went wrong.";
      console.error(e);
    }
  }
</script>

</body>
</html>
